<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Climbing diary</title>
    <link th:href="@{/css/bootstrap.css}" rel="stylesheet"/>
    <script th:src="@{/js/bootstrap.js}" type="text/javascript"></script>
    <script th:src="@{/js/styles.js}" type="text/javascript"></script>
</head>
<body>
<div class="container">
    <div class="grid">

        <div th:replace="header::myHeader"></div>

        <div class="box1">
            <h2 th:text="'Cześć ' + ${name}"></h2>

            <h4>Co Cię tu dziś sprowadza?</h4>

            <p>Chcę dodać drogę którą przeszedłem</p>
                <button class="btn btn-primary" onclick="showSth1()">DODAJ</button>

            <p>Pokaż mój dzinnik wspinaczkowy</p>
                <button class="btn btn-primary" onclick="showSth2()">POKAŻ</button>

            <p>Pokaż moje miejsce w rankingu</p>
                <button class="btn btn-primary" onclick="showSth3()">POKAŻ</button>

            <div th:if="${role == 'ADMIN'}">
                <p>Dodaj nową drogę do zestawienia</p>
                    <a class="btn btn-primary" href="/addRout" role="button">DODAJ</a>
            </div>

        </div>
        <div class="box2">
            <div th:if="${info != null}">
                <p th:text="${info}"></p>
            </div>

            <form th:action="@{/routsForRegion}" style="display:none" id="addForm">
                <select name="region">
                    <option th:each="region : ${T(com.beatex.climbingDiary.model.Region).values()}"
                            th:value="${region}" th:text="${region.name}"></option>
                </select>
                <input type="submit" value="Pokaż drogi w regionie">
            </form>

            <form th:action="@{/addRoutForClimber}" method="post">
                <input type="hidden" name="region" th:value="${region}">
                <select name="name">
                    <option th:each="n : ${routsByRegion}" th:value="${n.name}" th:text="${n.name}"></option>
                </select>
                <input type="submit" value="Dodaj drogę">
            </form>


            <div style="display: none" id="showDiary">
                <div th:unless="${#lists.isEmpty(routsClimber)}">
                    <table>
                        <thead>
                            <th>Name</th>
                            <th>Rate</th>
                            <th>Region</th>
                        </thead>
                        <tbody>
                            <tr th:each="r : ${routsClimber}">
                                <td th:text="${r.name}"></td>
                                <td th:text="${r.rate}"></td>
                                <td th:text="${r.getRegion()}"></td>
                            </tr>
                        </tbody>
                    </table>

                </div>
            </div>

            <div style="display: none" id="ranking">
                <div th:unless="${ranking.isEmpty()}">
               <table>
                   <thead>
                        <th>Numer</th>
                        <th>Imie wspinacza</th>
                        <th>Liczba punktów</th>
                   </thead>
                   <tbody>
                        <tr th:each="entry, stat : ${ranking}">
                            <td th:text="${stat.index + 1}">1</td>
                            <td th:text="${entry.key}">Imie</td>
                            <td th:text="${entry.value}">000</td>
                        </tr>
                   </tbody>
               </table>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>